# PRD-101: Hackathon 比赛平台 - 第一期需求文档（精简版）

## 1. 项目概述

### 1.1 项目背景
本项目旨在构建一个完整的 Hackathon（黑客松）比赛平台，支持主办方、参赛者和赞助商三方协同参与。平台分为两个独立的应用系统：
- **Hackathon Admin Platform**：供主办方和赞助商使用，用于活动管理和人员管理
- **Hackathon Arena Platform**：供参赛者使用，用于参与比赛的全流程操作

项目将分若干期完成，本 PRD 涵盖第一期的核心功能需求。

### 1.2 项目目标
第一期主要实现 Hackathon 比赛的核心流程，包括：
- 主办方和赞助商的账号密码登录及人员管理
- 主办方的活动全生命周期管理（创建、编辑、删除、发布）
- 活动的多阶段管理（预备、发布、报名、签到、组队、提交、投票、公布结果）
- 参赛者通过 Metamask 钱包登录
- 参赛者的完整参与流程（报名、签到、组队、提交作品、投票、查看结果）

### 1.3 项目范围
本 PRD 涵盖第一期开发需求，包括：
- Hackathon Admin Platform 的基础功能
- Hackathon Arena Platform 的基础功能
- 活动管理的核心流程
- 参赛者参与的核心流程

后续功能（如赞助商详细功能、数据分析、通知系统等）将在后续 PRD 中定义。

## 2. 用户角色定义

### 2.1 主办方（Organizer）
- **描述**：负责创建和管理 Hackathon 活动的组织或个人
- **权限**：
  - 通过账号密码登录 Hackathon Admin Platform
  - 创建、编辑、删除、发布活动
  - 管理活动各阶段及时间设置
  - 查看活动统计信息
- **登录方式**：账号密码登录

### 2.2 参赛者（Participant）
- **描述**：参与 Hackathon 比赛的个人或团队
- **权限**：
  - 通过 Metamask 钱包登录 Hackathon Arena Platform
  - 查看已发布的活动
  - 在报名阶段报名参加活动
  - 在签到阶段进行签到
  - 在组队阶段创建或加入队伍
  - 在提交阶段提交作品（仅队长）
  - 在投票阶段对所有作品进行投票
  - 在公布结果阶段查看比赛结果
- **登录方式**：Metamask 钱包关联登录

### 2.3 赞助商（Sponsor）
- **描述**：为 Hackathon 活动提供赞助的企业或组织
- **权限**：
  - 通过账号密码登录 Hackathon Admin Platform
  - 第一期功能待定（预留接口）
- **登录方式**：账号密码登录

### 2.4 系统管理员（Admin）
- **描述**：系统超级管理员，拥有最高权限
- **权限**：
  - 通过账号密码登录 Hackathon Admin Platform
  - 添加主办方人员
  - 添加赞助商人员
  - 管理所有用户账号
- **登录方式**：账号密码登录

## 3. 功能需求

### 3.1 Hackathon Admin Platform

#### 3.1.1 用户认证与授权

**功能描述**：用户登录和权限管理

**需求详情**：

- **登录功能**
  - 支持账号密码登录
  - 支持主办方、赞助商、Admin 三种角色登录
  - 登录成功后根据角色跳转到相应页面
  - 登录失败需提供明确的错误提示（账号不存在、密码错误等）
  - 支持登出功能

- **Admin 账号管理**
  - Admin 账号可以添加主办方人员
    - 必填字段：姓名、邮箱、密码、角色（主办方）、手机号
    - 邮箱需唯一性校验
    - 密码需符合安全规范（至少8位，包含字母和数字）
  - Admin 账号可以添加赞助商人员
    - 必填字段：姓名、邮箱、密码、角色（赞助商）、所属赞助商、手机号
    - 邮箱需唯一性校验
    - 密码需符合安全规范
  - 支持查看已添加的人员列表
    - 显示人员基本信息：姓名、邮箱、角色、所属组织、创建时间
    - 支持按角色筛选
    - 支持按姓名或邮箱搜索
    - 支持分页显示
  - 支持编辑人员信息（需确认权限）
    - 可修改姓名、手机号等信息
    - 不可修改邮箱和角色
  - 支持删除人员（需确认权限）
    - 删除前需二次确认
    - 删除后相关数据如何处理（软删除或硬删除）

#### 3.1.2 活动管理

**功能描述**：主办方对 Hackathon 活动的全生命周期管理

**需求详情**：

- **创建活动**
  - 必填字段：
    - 活动名称（1-100字符）
    - 活动描述（支持富文本，最多5000字符）
    - 活动开始时间（日期时间选择器）
    - 活动结束时间（日期时间选择器，需晚于开始时间）
    - 活动地点（下拉选择：线上/线下/混合，如选择线下或混合需填写具体地址）
    - 奖项设置（支持添加多个奖项，每个奖项包含：奖项名称、奖金/奖品、数量）
  - 活动创建后默认状态为"预备"

- **编辑活动**
  - 在活动未发布前（状态为"预备"），可以修改所有字段
  - 活动发布后（状态为"发布"或后续阶段），所有字段不可修改
  - 活动进行中，所有字段不可修改
  - 编辑时需保存草稿功能
  - 编辑后需确认保存

- **删除活动**
  - 仅允许删除处于"预备"阶段的活动
  - 删除前需二次确认，并提示删除后无法恢复
  - 删除后相关数据如何处理（建议软删除，保留历史数据）
  - 已发布的活动不能删除，只能归档

- **查看活动列表**
  - 支持按活动状态筛选（预备、发布、报名、签到、组队、提交、投票、公布结果）
  - 支持按活动名称搜索
  - 支持按创建时间排序（升序/降序）
  - 显示活动基本信息：
    - 活动名称
    - 活动状态
    - 创建时间
    - 活动时间（开始时间-结束时间）
    - 参与人数（报名人数）
    - 签到人数
    - 组队数量
    - 提交作品数量
  - 支持分页显示
  - 支持批量操作（如批量归档）

- **查看活动详情**
  - 显示活动的完整信息
  - 显示活动当前阶段
  - 显示各阶段的开始和结束时间（如有）
  - 显示参与人数、报名人数、签到人数、组队数量、提交作品数量等统计信息

#### 3.1.3 活动阶段管理

**功能描述**：管理活动的各个阶段及时间设置

**需求详情**：

- **活动阶段定义**
  - 预备（Preparation）：活动创建后的初始状态，可编辑活动信息，参赛者不可见
  - 发布（Published）：活动对外发布，参赛者可见，但还不能报名
  - 报名（Registration）：参赛者可以报名参加，需设置开始和结束时间
  - 签到（Check-in）：已报名的参赛者可以进行签到，需设置开始和结束时间
  - 组队（Team Formation）：参赛者可以组队，需设置开始和结束时间
  - 提交（Submission）：队伍可以提交作品，需设置开始和结束时间
  - 投票（Voting）：参赛者可以对作品进行投票，需设置开始和结束时间
  - 公布结果（Results）：公布比赛结果，参赛者可以查看结果

- **阶段时间设置**
  - 以下阶段需要设置开始和结束时间：
    - 报名阶段
    - 签到阶段
    - 组队阶段
    - 提交阶段
    - 投票阶段
  - 时间设置要求：
    - 开始时间不能早于活动开始时间
    - 结束时间不能晚于活动结束时间
    - 各阶段时间不能重叠（本阶段的开始时间不能早于上一个阶段的结束时间）
    - 时间格式：YYYY-MM-DD HH:mm:ss
    - 支持快速设置（如：报名阶段持续3天，签到阶段持续1天等）
  - 时间设置界面：
    - 使用时间选择器
    - 显示时间轴视图，直观展示各阶段时间安排
    - 提供时间冲突检测和提示

- **阶段切换**
  - 主办方可以手动切换活动阶段
    - 从"预备"切换到"发布"
    - 从"发布"切换到"报名"（需设置报名时间）
    - 后续阶段可以手动切换或自动切换
  - 系统可以自动切换阶段（基于时间设置）
    - 到达阶段开始时间时，自动进入该阶段
    - 到达阶段结束时间时，自动进入下一阶段
  - 阶段切换后，前一阶段的某些操作可能被锁定
    - 例如：报名阶段结束后，不能再报名
    - 例如：组队阶段结束后，不能再组队
  - 阶段切换需记录日志，便于追溯

### 3.2 Hackathon Arena Platform

#### 3.2.1 用户认证

**功能描述**：参赛者通过 Metamask 钱包登录

**需求详情**：

- **Metamask 连接**
  - 检测用户是否安装 Metamask 插件
  - 如未安装，提供安装指引（包括下载链接和安装步骤）
  - 支持连接 Metamask 钱包
  - 连接成功后获取钱包地址
  - 首次连接需要用户签名确认（用于身份验证）
  - 支持切换钱包账户
  - 支持断开连接

- **用户信息**
  - 使用钱包地址作为用户唯一标识
  - 用户信息可以后续修改
  - 用户信息用于展示在队伍成员、作品提交等场景

#### 3.2.2 活动浏览与报名

**功能描述**：参赛者查看和报名参加活动

**需求详情**：

- **活动列表**
  - 显示所有已发布的活动（状态为"发布"及后续阶段）
  - 显示活动基本信息：
    - 活动名称
    - 活动描述（摘要）
    - 活动时间（开始时间-结束时间）
    - 活动地点
    - 当前阶段
    - 参与人数（报名人数）
  - 支持按活动状态筛选（发布、报名、签到、组队、提交、投票、公布结果）
  - 支持按活动名称搜索
  - 支持按活动时间排序（即将开始、进行中、已结束）
  - 支持分页显示
  - 点击活动卡片可查看活动详情

- **活动详情**
  - 显示活动的完整信息：
    - 活动名称
    - 活动描述（完整内容）
    - 活动时间（开始时间-结束时间）
    - 活动地点
    - 奖项设置
  - 显示活动当前阶段
  - 显示各阶段的开始和结束时间（时间轴展示）
  - 显示活动统计信息：
    - 报名人数
    - 签到人数
    - 组队数量
    - 提交作品数量
  - 根据当前阶段显示相应操作按钮（报名、签到、组队等）

- **报名功能**
  - 仅在"报名"阶段可以报名
  - 报名时间需在设定的时间范围内
  - 报名操作无需主办方审核，提交即生效
  - 报名时需确认用户已登录（Metamask 连接）
  - 同一用户不能重复报名同一活动
  - 报名成功后显示确认信息
  - 报名记录包含：用户地址、报名时间、活动ID
  - 报名后用户可以在"我的活动"中查看已报名的活动

#### 3.2.3 签到功能

**功能描述**：已报名的参赛者在签到阶段进行签到

**需求详情**：

- 仅在"签到"阶段可以签到
- 签到时间需在设定的时间范围内
- 仅已报名的用户可以进行签到
- 签到操作无需主办方审核，提交即生效
- 同一用户不能重复签到
- 签到前需确认用户已登录（Metamask 连接）
- 签到成功后显示确认信息
- 签到记录包含：用户地址、签到时间、活动ID
- 签到后用户状态更新为"已签到"，可以参与后续流程（组队、提交等）

#### 3.2.4 组队功能

**功能描述**：已签到的参赛者在组队阶段进行组队

**需求详情**：

- 仅在"组队"阶段可以组队
- 组队时间需在设定的时间范围内
- 仅已签到的用户可以进行组队
- 组队操作无需主办方审核，提交即生效

- **创建队伍**
  - 用户可以创建新队伍
  - 创建队伍时需设置：
    - 队伍名称（必填，1-50字符，需唯一性校验）
    - 队伍成员上限（默认值3，包含队长，可配置，范围1-10）
  - 创建者自动成为队长
  - 创建成功后，队伍状态为"招募中"

- **加入队伍**
  - 用户可以加入已存在的队伍
  - 加入前需确认队伍未满员
  - 同一用户不能同时加入多个队伍
  - 已加入队伍的用户不能重复加入
  - 加入成功后，用户成为队员

- **队伍管理**
  - 队长可以：
    - 查看队伍成员列表（显示成员钱包地址等）
    - 移除队伍成员（不能移除自己）
    - 解散队伍（需确认，解散后所有成员恢复未组队状态）
    - 修改队伍信息（队伍名称，在组队阶段内）
  - 队员可以：
    - 查看队伍成员列表
    - 退出队伍（需确认，退出后可以重新组队）
  - 队伍信息展示：
    - 队伍名称
    - 成员列表（显示成员基本信息）
    - 创建时间
    - 当前成员数/最大成员数

- **组队限制**
  - 每个队伍至少需要 1 名成员（队长）
  - 每个队伍最多成员数由活动设置决定（默认值3，可配置）
  - 组队阶段结束后，队伍成员不能变更
  - 组队阶段结束后，未组队的用户不能继续组队

#### 3.2.5 作品提交功能

**功能描述**：队伍在提交阶段提交作品

**需求详情**：

- 仅在"提交"阶段可以提交作品
- 提交时间需在设定的时间范围内
- 仅已组队的队伍可以提交作品
- 仅队长可以提交作品
- 提交操作无需主办方审核，提交即生效

- **提交内容**
  - 必填字段：
    - 作品名称（1-100字符）
    - 作品描述（支持富文本，最多2000字符）
    - 作品链接（GitHub、演示地址等，需URL格式校验）
  - 提交表单需支持保存草稿功能

- **提交限制**
  - 每个队伍只能提交一个作品
  - 提交后可以修改（在提交阶段内）
  - 提交阶段结束后不能修改
  - 提交后作品立即对所有参赛者可见（在投票阶段）

- **作品展示**
  - 提交成功后，作品会在投票阶段对所有参赛者可见
  - 作品展示包含：
    - 作品名称
    - 作品描述
    - 作品链接
    - 提交时间
    - 队伍信息（队伍名称、成员列表）
  - 支持作品列表展示和详情页展示
  - 支持按作品名称搜索
  - 支持按提交时间排序

#### 3.2.6 投票功能

**功能描述**：参赛者在投票阶段对所有作品进行投票

**需求详情**：

- 仅在"投票"阶段可以投票
- 投票时间需在设定的时间范围内
- 仅已签到的用户可以进行投票
- 投票操作无需主办方审核，提交即生效

- **投票规则**
  - 每个用户可以对多个作品投票（需明确投票数量限制，如：最多投3票，或对所有作品投票）
  - 每个用户对同一作品只能投票一次
  - 用户能对自己的队伍作品投票（需明确是否允许）
  - 投票需确认操作（防止误操作）

- **投票方式**
  - 投票记录包含：用户地址、投票时间、投票作品ID
  - 支持取消投票（在投票阶段内）
  - 投票界面需展示所有作品，支持筛选和搜索
  - 投票后实时更新得票数

- **投票结果**
  - 实时显示各作品的得票数
  - 投票阶段结束后，统计最终投票结果
  - 投票结果用于排名和奖项分配

#### 3.2.7 结果查看功能

**功能描述**：参赛者在公布结果阶段查看比赛结果

**需求详情**：

- 仅在"公布结果"阶段可以查看结果
- 显示最终排名（按得票数排序）
- 显示获奖队伍信息：
  - 排名
  - 队伍名称
  - 作品名称
  - 得票数
  - 奖项信息
- 显示各作品的得票数
- 支持查看详细结果页面：
  - 完整排名列表
  - 获奖作品详情
  - 统计数据（总投票数、参与队伍数等）

## 4. 业务流程

### 4.1 活动创建流程
1. 主办方登录 Hackathon Admin Platform
2. 进入活动管理页面
3. 点击"创建活动"按钮
4. 填写活动基本信息（名称、描述、时间、地点、奖项等）
5. 设置各阶段时间（报名、签到、组队、提交、投票）
6. 保存活动（状态：预备）
7. 预览活动信息，确认无误
8. 发布活动（状态：发布）
9. 活动对外可见，参赛者可以查看

### 4.2 参赛者参与流程
1. 参赛者打开 Hackathon Arena Platform
2. 连接 Metamask 钱包登录
3. 浏览已发布的活动列表
4. 查看活动详情，了解活动信息
5. 在报名阶段点击"报名"按钮，完成报名
6. 在签到阶段点击"签到"按钮，完成签到
7. 在组队阶段：
   - 创建新队伍或加入已有队伍
8. 在提交阶段（队长操作）：
   - 填写作品信息
   - 提交作品
9. 在投票阶段：
   - 浏览所有提交的作品
   - 对喜欢的作品进行投票
10. 在公布结果阶段：
    - 查看最终排名
    - 查看获奖队伍信息

### 4.3 阶段流转流程
- 活动创建后进入"预备"阶段（主办方可编辑活动信息）
- 主办方发布活动后进入"发布"阶段（参赛者可见，但还不能报名）
- 到达报名开始时间后自动进入"报名"阶段（或主办方手动切换）
- 报名阶段结束后自动进入"签到"阶段（或主办方手动切换）
- 签到阶段结束后自动进入"组队"阶段（或主办方手动切换）
- 组队阶段结束后自动进入"提交"阶段（或主办方手动切换）
- 提交阶段结束后自动进入"投票"阶段（或主办方手动切换）
- 投票阶段结束后自动进入"公布结果"阶段（或主办方手动切换）
- 每个阶段结束后，前一阶段的操作被锁定

### 4.4 Admin 人员管理流程
1. Admin 登录 Hackathon Admin Platform
2. 进入人员管理页面
3. 选择添加主办方人员或赞助商人员
4. 填写人员基本信息（姓名、邮箱、密码、角色等）
5. 保存人员信息
6. 人员可以使用账号密码登录

**文档版本**: v1.0M
**创建日期**: 2024-01-XX
**最后更新**: 2024-01-XX
**维护人员**: 产品团队

